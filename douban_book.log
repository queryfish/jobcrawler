2019-10-17 22:10:24 [scrapy.utils.log] INFO: Scrapy 1.5.1 started (bot: tutorial)
2019-10-17 22:10:24 [scrapy.utils.log] INFO: Versions: lxml 4.2.5.0, libxml2 2.9.8, cssselect 1.0.3, parsel 1.5.0, w3lib 1.19.0, Twisted 18.7.0, Python 2.7.10 (default, Oct  6 2017, 22:29:07) - [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)], pyOpenSSL 18.0.0 (OpenSSL 1.1.0i  14 Aug 2018), cryptography 2.3.1, Platform Darwin-17.7.0-x86_64-i386-64bit
2019-10-17 22:10:24 [scrapy.crawler] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'tutorial.spiders', 'LOG_FILE': './douban_book.log', 'RETRY_ENABLED': False, 'SPIDER_MODULES': ['tutorial.spiders'], 'BOT_NAME': 'tutorial', 'USER_AGENT': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1', 'FEED_EXPORT_ENCODING': 'utf-8', 'DOWNLOAD_DELAY': 0.8}
2019-10-17 22:10:24 [scrapy.middleware] INFO: Enabled extensions:
['scrapy.extensions.memusage.MemoryUsage',
 'scrapy.extensions.logstats.LogStats',
 'scrapy.extensions.telnet.TelnetConsole',
 'scrapy.extensions.corestats.CoreStats']
2019-10-17 22:10:24 [tutorial.spiders.douban_book] INFO: fetch from mongo
2019-10-17 22:10:25 [urllib3.connectionpool] DEBUG: Starting new HTTPS connection (1): tps.kdlapi.com:443
2019-10-17 22:10:25 [urllib3.connectionpool] DEBUG: https://tps.kdlapi.com:443 "GET /api/gettpsip/?orderid=907089398818285&signature=s0hwg7zopaalk51at1i2zf9ltc80zwet HTTP/1.1" 200 None
2019-10-17 22:10:25 [tutorial.paidProxyManager] INFO: {u'msg': u'signature error: s0hwg7zopaalk51at1i2zf9ltc80zwet', u'code': -104, u'data': u''}
2019-10-17 22:10:25 [twisted] CRITICAL: Unhandled error in Deferred:
2019-10-17 22:10:25 [twisted] CRITICAL: 
Traceback (most recent call last):
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/twisted/internet/defer.py", line 1418, in _inlineCallbacks
    result = g.send(result)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/crawler.py", line 98, in crawl
    six.reraise(*exc_info)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/crawler.py", line 80, in crawl
    self.engine = self._create_engine()
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/crawler.py", line 105, in _create_engine
    return ExecutionEngine(self, lambda _: self.stop())
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/core/engine.py", line 69, in __init__
    self.downloader = downloader_cls(crawler)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/core/downloader/__init__.py", line 88, in __init__
    self.middleware = DownloaderMiddlewareManager.from_crawler(crawler)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/middleware.py", line 58, in from_crawler
    return cls.from_settings(crawler.settings, crawler)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/middleware.py", line 34, in from_settings
    mwcls = load_object(clspath)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/utils/misc.py", line 44, in load_object
    mod = import_module(module)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py", line 37, in import_module
    __import__(name)
  File "/Users/deeplycurious/Projects/Crawler/onelinespider_boss_crawler/douban_book_scrapy/tutorial/middlewares_proxy.py", line 18, in <module>
    proxyManager = PaidProxyManager();
  File "/Users/deeplycurious/Projects/Crawler/onelinespider_boss_crawler/douban_book_scrapy/tutorial/paidProxyManager.py", line 39, in __init__
    self.cur_url = self.get_tunnel_proxy()
  File "/Users/deeplycurious/Projects/Crawler/onelinespider_boss_crawler/douban_book_scrapy/tutorial/paidProxyManager.py", line 110, in get_tunnel_proxy
    ip = content['data']['current_ip']
TypeError: string indices must be integers
2019-10-17 22:10:50 [scrapy.utils.log] INFO: Scrapy 1.5.1 started (bot: tutorial)
2019-10-17 22:10:50 [scrapy.utils.log] INFO: Versions: lxml 4.2.5.0, libxml2 2.9.8, cssselect 1.0.3, parsel 1.5.0, w3lib 1.19.0, Twisted 18.7.0, Python 2.7.10 (default, Oct  6 2017, 22:29:07) - [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)], pyOpenSSL 18.0.0 (OpenSSL 1.1.0i  14 Aug 2018), cryptography 2.3.1, Platform Darwin-17.7.0-x86_64-i386-64bit
2019-10-17 22:10:50 [scrapy.crawler] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'tutorial.spiders', 'LOG_FILE': './douban_book.log', 'RETRY_ENABLED': False, 'SPIDER_MODULES': ['tutorial.spiders'], 'BOT_NAME': 'tutorial', 'LOG_STDOUT': True, 'USER_AGENT': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1', 'FEED_EXPORT_ENCODING': 'utf-8', 'DOWNLOAD_DELAY': 0.8}
2019-10-17 22:10:50 [scrapy.middleware] INFO: Enabled extensions:
['scrapy.extensions.memusage.MemoryUsage',
 'scrapy.extensions.logstats.LogStats',
 'scrapy.extensions.telnet.TelnetConsole',
 'scrapy.extensions.corestats.CoreStats']
2019-10-17 22:10:50 [tutorial.spiders.douban_book] INFO: fetch from mongo
2019-10-17 22:10:50 [urllib3.connectionpool] DEBUG: Starting new HTTPS connection (1): tps.kdlapi.com:443
2019-10-17 22:10:50 [urllib3.connectionpool] DEBUG: https://tps.kdlapi.com:443 "GET /api/gettpsip/?orderid=907089398818285&signature=s0hwg7zopaalk51at1i2zf9ltc80zwet HTTP/1.1" 200 None
2019-10-17 22:10:50 [tutorial.paidProxyManager] INFO: {u'msg': u'signature error: s0hwg7zopaalk51at1i2zf9ltc80zwet', u'code': -104, u'data': u''}
2019-10-17 22:10:50 [twisted] CRITICAL: Unhandled error in Deferred:
2019-10-17 22:10:50 [twisted] CRITICAL: 
Traceback (most recent call last):
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/twisted/internet/defer.py", line 1418, in _inlineCallbacks
    result = g.send(result)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/crawler.py", line 98, in crawl
    six.reraise(*exc_info)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/crawler.py", line 80, in crawl
    self.engine = self._create_engine()
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/crawler.py", line 105, in _create_engine
    return ExecutionEngine(self, lambda _: self.stop())
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/core/engine.py", line 69, in __init__
    self.downloader = downloader_cls(crawler)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/core/downloader/__init__.py", line 88, in __init__
    self.middleware = DownloaderMiddlewareManager.from_crawler(crawler)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/middleware.py", line 58, in from_crawler
    return cls.from_settings(crawler.settings, crawler)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/middleware.py", line 34, in from_settings
    mwcls = load_object(clspath)
  File "/Users/deeplycurious/Library/Python/2.7/lib/python/site-packages/scrapy/utils/misc.py", line 44, in load_object
    mod = import_module(module)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py", line 37, in import_module
    __import__(name)
  File "/Users/deeplycurious/Projects/Crawler/onelinespider_boss_crawler/douban_book_scrapy/tutorial/middlewares_proxy.py", line 18, in <module>
    proxyManager = PaidProxyManager();
  File "/Users/deeplycurious/Projects/Crawler/onelinespider_boss_crawler/douban_book_scrapy/tutorial/paidProxyManager.py", line 39, in __init__
    self.cur_url = self.get_tunnel_proxy()
  File "/Users/deeplycurious/Projects/Crawler/onelinespider_boss_crawler/douban_book_scrapy/tutorial/paidProxyManager.py", line 110, in get_tunnel_proxy
    ip = content['data']['current_ip']
TypeError: string indices must be integers
2019-10-19 10:30:34 [scrapy.utils.log] INFO: Scrapy 1.5.1 started (bot: tutorial)
2019-10-19 10:30:34 [scrapy.utils.log] INFO: Versions: lxml 4.2.5.0, libxml2 2.9.8, cssselect 1.0.3, parsel 1.5.0, w3lib 1.19.0, Twisted 18.7.0, Python 2.7.10 (default, Oct  6 2017, 22:29:07) - [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)], pyOpenSSL 18.0.0 (OpenSSL 1.1.0i  14 Aug 2018), cryptography 2.3.1, Platform Darwin-17.7.0-x86_64-i386-64bit
2019-10-19 10:30:34 [scrapy.crawler] INFO: Overridden settings: {'NEWSPIDER_MODULE': 'tutorial.spiders', 'LOG_FILE': './douban_book.log', 'LOG_LEVEL': 'INFO', 'CONCURRENT_REQUESTS_PER_DOMAIN': 3, 'CONCURRENT_REQUESTS': 3, 'RETRY_ENABLED': False, 'SPIDER_MODULES': ['tutorial.spiders'], 'BOT_NAME': 'tutorial', 'COOKIES_ENABLED': False, 'USER_AGENT': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1', 'FEED_EXPORT_ENCODING': 'utf-8', 'DOWNLOAD_DELAY': 0.33}
2019-10-19 10:30:34 [scrapy.middleware] INFO: Enabled extensions:
['scrapy.extensions.memusage.MemoryUsage',
 'scrapy.extensions.logstats.LogStats',
 'scrapy.extensions.telnet.TelnetConsole',
 'scrapy.extensions.corestats.CoreStats']
2019-10-19 10:30:34 [tutorial.spiders.douban_book] INFO: fetch from mongo
2019-10-19 10:30:34 [tutorial.rotateProxyManager] INFO: {u'msg': u'', u'code': 0, u'data': {u'count': 3, u'proxy_list': [u'61.191.85.93:21124', u'120.86.39.87:22915', u'115.202.158.59:21478'], u'order_left_count': 812, u'dedup_count': 3}}
2019-10-19 10:30:34 [scrapy.middleware] INFO: Enabled downloader middlewares:
['tutorial.middlewares.RandomUserAgent',
 'tutorial.middlewares_rotate_proxy.RegularProxyMiddleware',
 'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware',
 'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',
 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',
 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',
 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',
 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',
 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',
 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',
 'scrapy.downloadermiddlewares.stats.DownloaderStats']
2019-10-19 10:30:34 [scrapy.middleware] INFO: Enabled spider middlewares:
['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',
 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',
 'scrapy.spidermiddlewares.referer.RefererMiddleware',
 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',
 'scrapy.spidermiddlewares.depth.DepthMiddleware']
2019-10-19 10:30:34 [scrapy.middleware] INFO: Enabled item pipelines:
['tutorial.pipelines.DoubanBookPipeline']
2019-10-19 10:30:34 [scrapy.core.engine] INFO: Spider opened
2019-10-19 10:30:34 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2019-10-19 10:30:34 [tutorial.middlewares_rotate_proxy] INFO: using proxy: http://marrowsky:0krbqw3g@115.202.158.59:21478
2019-10-19 10:30:34 [tutorial.middlewares_rotate_proxy] INFO: using proxy: http://marrowsky:0krbqw3g@61.191.85.93:21124
2019-10-19 10:30:34 [tutorial.middlewares_rotate_proxy] INFO: using proxy: http://marrowsky:0krbqw3g@120.86.39.87:22915
2019-10-19 10:30:35 [scrapy.crawler] INFO: Received SIGINT, shutting down gracefully. Send again to force 
2019-10-19 10:30:35 [scrapy.core.engine] INFO: Closing spider (shutdown)
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: NO.1 book crawled ..
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: 恒大许家印：苦难是我珍贵的财富
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: https://book.douban.com/subject/27199659/
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: fetch from mongo
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: NO.2 book crawled ..
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: 世界之王
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: https://book.douban.com/subject/27155986/
2019-10-19 10:30:36 [tutorial.spiders.douban_book] INFO: fetch from mongo
2019-10-19 10:30:37 [tutorial.spiders.douban_book] INFO: NO.3 book crawled ..
2019-10-19 10:30:37 [tutorial.spiders.douban_book] INFO: 元稹：只缘感君一回顾
2019-10-19 10:30:37 [tutorial.spiders.douban_book] INFO: https://book.douban.com/subject/27135536/
2019-10-19 10:30:37 [tutorial.spiders.douban_book] INFO: fetch from mongo
2019-10-19 10:30:37 [scrapy.statscollectors] INFO: Dumping Scrapy stats:
{'downloader/request_bytes': 1144,
 'downloader/request_count': 3,
 'downloader/request_method_count/GET': 3,
 'downloader/response_bytes': 79040,
 'downloader/response_count': 3,
 'downloader/response_status_count/200': 3,
 'dupefilter/filtered': 2,
 'finish_reason': 'shutdown',
 'finish_time': datetime.datetime(2019, 10, 19, 2, 30, 37, 196848),
 'item_scraped_count': 3,
 'log_count/INFO': 25,
 'memusage/max': 55324672,
 'memusage/startup': 55324672,
 'request_depth_max': 1,
 'response_received_count': 3,
 'scheduler/dequeued': 3,
 'scheduler/dequeued/memory': 3,
 'scheduler/enqueued': 31,
 'scheduler/enqueued/memory': 31,
 'start_time': datetime.datetime(2019, 10, 19, 2, 30, 34, 947809)}
2019-10-19 10:30:37 [scrapy.core.engine] INFO: Spider closed (shutdown)
